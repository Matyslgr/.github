name: ðŸ“¦ Release Maker

on:
  workflow_call:
    inputs:
      artifact_pattern:
        required: false
        type: string
        default: "*" # By default, include all artifacts
        description: "Pattern of artifacts to include (e.g., *-build)"

jobs:
  publish:
    name: ðŸš€ Publish Release
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      # 1. Download ALL artifacts into the dist/ folder
      - name: ðŸ“¥ Download Artifacts
        uses: actions/download-artifact@v4
        with:
          pattern: ${{ inputs.artifact_pattern }}
          merge-multiple: true # Merge everything into the same folder
          path: dist

      # 2. Create the release with everything found in dist/
      - name: ðŸ“¦ Create GitHub Release
        uses: softprops/action-gh-release@v2
        with:
          generate_release_notes: true
          files: dist/**/*
          prerelease: ${{ contains(github.ref, '-') }}